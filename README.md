# DDoS Dataset Generator

This project provides a Docker-based setup for generating DDoS attack datasets. It simulates distributed denial-of-service attacks using multiple attacker containers, captures network traffic on a victim container, and processes the captured packets into flow-based datasets using CICFlowMeter.

## Overview

The setup consists of:
- **Attacker containers**: Run various DDoS attack scripts (SYN flood, UDP flood, HTTP flood, DNS amplification) using Scapy
- **Victim container**: Captures incoming traffic using tcpdump and saves PCAP files
- **Orchestrator**: Python script to manage Docker Compose scaling for distributed attack simulation
- **CICFlowMeter**: Processes PCAP files into CSV flow datasets for machine learning

## Architecture

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│  Attacker       │    │  Victim         │    │  CICFlowMeter   │
│  Containers     │──▶│  Container       │──▶│  Processing     │
│  (Scaled)       │    │  (tcpdump)      │    │  (PCAP → CSV)   │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

All containers run on a custom Docker network (10.10.0.0/16) for controlled traffic simulation.

## Components

### Orchestrator (`orchestrator.py`)
A Python script that manages the Docker Compose environment:
- Start/stop the lab
- Scale attacker containers dynamically
- View container status and logs

### Attacker (`attacker/`)
- **Dockerfile**: Python 3.9 with Scapy and networking tools
- **Scripts** (`scripts/`):
  - `syn_flood.py`: SYN flood attack with realistic intensity profiles
  - `udp_flood.py`: UDP flood attack
  - `http_flood.py`: HTTP GET flood
  - `dns_amplification.py`: DNS amplification attack

### Victim (`victim/`)
- **Dockerfile**: Python 3.9 with tcpdump and networking tools
- Captures all traffic to PCAP files in the `/pcaps` volume
- Runs with privileged mode for packet capture

### CICFlowMeter
External tool for converting PCAP files to flow CSV datasets. See `cicflowmeter.md` for detailed setup instructions.

## Usage

### Prerequisites
- Docker and Docker Compose
- Java 8 (for CICFlowMeter)
- Network interface for traffic capture (when running outside Docker)

### 1. Start the Lab
```bash
# Start with default scaling (1 attacker)
python orchestrator.py up

# Or start with multiple attackers
python orchestrator.py scale 5
```

### 2. Run Attacks
Connect to attacker containers and execute attack scripts:
```bash
# Get attacker container names
python orchestrator.py status

# Run attack (example: SYN flood for 60 seconds)
docker exec -it lab-attacker-1 python /scripts/syn_flood.py 10.10.0.100 60
```

### 3. Capture Traffic
The victim container automatically captures all traffic to PCAP files in `./pcaps/`.

### 4. Stop the Lab
```bash
python orchestrator.py down
```

### 5. Process PCAPs to Flows
Follow the CICFlowMeter setup in `cicflowmeter.md` to convert PCAP files to CSV datasets.

## Network Configuration

- **Network**: `10.10.0.0/16`
- **Victim IP**: `10.10.0.100`
- **Attackers**: Dynamic IPs assigned by Docker
- **Volume**: `./pcaps` mounted to victim container for PCAP storage

## Attack Scripts

Each attack script takes two arguments:
- Target IP (victim IP)
- Duration in seconds

Example usage:
```bash
python syn_flood.py 10.10.0.100 120
```

## Output

- **PCAP files**: Stored in `./pcaps/` directory
- **Flow CSVs**: Generated by CICFlowMeter in `CICFlowMeter/output/`

## Development

### Adding New Attacks
1. Create new Python script in `attacker/scripts/`
2. Use Scapy for packet crafting
3. Follow the argument pattern: `<target_ip> <duration>`

### Scaling
Use the orchestrator to scale attackers for distributed simulation:
```bash
python orchestrator.py scale 10  # 10 attacker containers
```

## Limitations

- Requires privileged containers for raw socket access
- CICFlowMeter has known limitations with large PCAPs
- Designed for research/dataset generation, not production use

## License

See individual component licenses (CICFlowMeter, Scapy, etc.)